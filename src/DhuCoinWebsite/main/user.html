<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="utf-8" />
  <link rel="apple-touch-icon" sizes="76x76" href="../assets/img/apple-icon.png">
  <link rel="icon" type="image/png" href="../assets/img/favicon.png">
  <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
  <title>
    DHU Blockchain
  </title>
  <script type="text/javascript" src="https://code.jquery.com/jquery-3.2.1.slim.min.js"></script>
  <meta content='width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0, shrink-to-fit=no' name='viewport' />
  <!--     Fonts and icons     -->
  <link rel="stylesheet" type="text/css" href="https://fonts.googleapis.com/css?family=Roboto:300,400,500,700|Roboto+Slab:400,700|Material+Icons" />
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/latest/css/font-awesome.min.css">
  <!-- CSS Files -->
  <link href="../assets/css/material-dashboard.css?v=2.1.0" rel="stylesheet" />
  <!-- CSS Just for demo purpose, don't include it in your project -->
  <link href="../assets/demo/demo.css" rel="stylesheet" />
  <script src="../node_modules/web3/dist/web3.min.js"></script>
  <script src="../javascript/dhuCoinABI.js" type="text/javascript"></script>
  <script src="../javascript/functions.js" type="text/javascript"></script>
  <script src="../javascript/display_functions.js" type="text/javascript"></script>
</head>

<body class="" onload="loadDatabaseAddr()">
  <div class="wrapper ">
    <div class="sidebar" data-color="purple" data-background-color="white" data-image="../assets/img/sidebar-1.jpg">
      <!--
        Tip 1: You can change the color of the sidebar using: data-color="purple | azure | green | orange | danger"

        Tip 2: you can also add an image using data-image tag
    -->
      <div class="logo">
        <a href="./dashboard.html" class="simple-text logo-normal">
          DHU Blockchain Platform
        </a>
      </div>
      <div class="sidebar-wrapper">
        <ul class="nav">
          <li class="nav-item  ">
            <a class="nav-link" href="./dashboard.html">
              <i class="material-icons">dashboard</i>
              <p>Dashboard</p>
            </a>
          </li>
          <li class="nav-item active ">
            <a class="nav-link" href="./user.html">
              <i class="material-icons">group_add</i>
              <p>学生管理</p>
            </a>
          </li>
          <li class="nav-item ">
            <a class="nav-link" href="./tables.html">
              <i class="material-icons">content_paste</i>
              <p>学生リスト</p>
            </a>
          </li>
          <li class="nav-item ">
            <a class="nav-link" href="./notifications.html">
              <i class="material-icons">notifications</i>
              <p>ゼミリスト</p>
            </a>
          </li>
          <li class="nav-item ">
            <a class="nav-link" href="./mining.html">
              <i class="material-icons">card_giftcard</i>
              <p>報酬マイニング</p>
            </a>
          </li>
          <li class="nav-item ">
            <a class="nav-link" href="./pricing.html">
              <i class="material-icons">create_new_folder</i>
              <p>トークン価格管理</p>
            </a>
          </li>
          <li class="nav-item ">
            <a class="nav-link" href="./wallet.html">
              <i class="material-icons">account_balance_wallet</i>
              <p>ウォレット管理</p>
            </a>
          </li>
        </ul>
      </div>
    </div>
    <div class="main-panel">
      <!-- Navbar -->
      <nav class="navbar navbar-expand-lg navbar-transparent navbar-absolute fixed-top ">
        <div class="container-fluid">
          <div class="navbar-wrapper">
            <a class="navbar-brand" href="#pablo">Contract Details</a>
          </div>
          <button class="navbar-toggler" type="button" data-toggle="collapse" aria-controls="navigation-index"
            aria-expanded="false" aria-label="Toggle navigation">
            <span class="sr-only">Toggle navigation</span>
            <span class="navbar-toggler-icon icon-bar"></span>
            <span class="navbar-toggler-icon icon-bar"></span>
            <span class="navbar-toggler-icon icon-bar"></span>
          </button>
          <div class="collapse navbar-collapse justify-content-end">
            <ul class="navbar-nav">
              <li class="nav-item dropdown">
                <a class="nav-link" href="http://example.com" id="navbarDropdownMenuLink" data-toggle="dropdown"
                  aria-haspopup="true" aria-expanded="false">
                  <i class="material-icons">list</i>
                  <p class="d-lg-none d-md-block">
                    Some Actions
                  </p>
                </a>
                <div class="dropdown-menu dropdown-menu-right" aria-labelledby="navbarDropdownMenuLink">
                  <a class="dropdown-item" onclick="copyToClipboard('#p1')" href="#">デジココントラクト:
                    0xe95872d9cefe6c92228d19a80b290cbaca3d191e</a>
                  <p style="display:none" id="p1">0xe95872d9cefe6c92228d19a80b290cbaca3d191e</p>
                  <a class="dropdown-item" onclick="copyToClipboard('#p2')" href="#">データベース:
                    0x2fc9d16f1c83c8c2c721b21fe06bff5808f0c001</a>
                  <p style="display:none" id="p2">0x2fc9d16f1c83c8c2c721b21fe06bff5808f0c001</p>
                </div>
              </li>
            </ul>
          </div>
        </div>
      </nav>
      <!-- End Navbar -->
      <div class="content">
        <div class="container-fluid">
          <div class="row">
            <div class="col-md-8" style="flex:none; max-width:none">
              <div class="card">
                <div class="card-header card-header-primary">
                  <h4 class="card-title">学生を追加する</h4>
                  <p class="card-category">学生情報を入力して下さい</p>
                </div>
                <div class="card-body">
                  <div class="row">
                    <div class="col-md-4">
                      <div class="form-group">
                        <label class="bmd-label-floating">学生の名前</label>
                        <input type="text" class="form-control" id="studentName">
                      </div>
                    </div>
                    <div class="col-md-4">
                      <div class="form-group">
                        <label class="bmd-label-floating">学籍番号</label>
                        <input type="email" class="form-control" id="studentId">
                      </div>
                    </div>
                    <div class="col-md-4">
                      <div class="form-group">
                        <label class="bmd-label-floating">学生のGPA</label>
                        <input type="text" class="form-control" id="GPA">
                      </div>
                    </div>
                    <div class="col-md-8">
                      <div class="form-group">
                        <label class="bmd-label-floating">アクションタイプ</label>
                        <input type="text" class="form-control" id="actionDescription" value="追加" readonly="true" style="background:white; border-bottom: 1px solid #d2d2d2">
                      </div>
                    </div>
                  </div>
                  <div class="row">
                    <div class="col-md-8">
                      <div class="form-group">
                        <label class="bmd-label-floating">ゼミのアドレス</label>
                        <input type="text" class="form-control" id="seminarAddress">
                      </div>
                    </div>
                    <div class="col-md-8">
                      <div class="form-group">
                        <label class="bmd-label-floating">ゼミの名前</label>
                        <input type="text" class="form-control" id="seminarName">
                      </div>
                    </div>
                  </div>
                  <div class="row">
                    <div class="col-md-8">
                      <div class="form-group">
                        <label class="bmd-label-floating">データベースのアドレス</label>
                        <input type="text" class="form-control" id="dataBaseAddr">
                      </div>
                    </div>
                  </div>
                  <input type="button" class="btn btn-primary pull-right" id="createStudent" value="学生を追加する" />
                </div>
              </div>
            </div>
          </div>
        </div>
        <div class="container-fluid">
          <div class="row">
            <div class="col-md-8" style="flex:none; max-width:none">
              <div class="card">
                <div class="card-header card-header-primary">
                  <h4 class="card-title">学生情報を更新する</h4>
                  <p class="card-category">学生情報を更新して下さい</p>
                </div>
                <div class="card-body">
                  <div class="row">
                    <div class="col-md-8">
                      <div class="form-group">
                        <label class="bmd-label-floating">更新する学生のアドレス</label>
                        <input type="text" class="form-control" id="updateStudentAddr">
                      </div>
                    </div>
                  </div>
                  <div class="row">
                    <div class="col-md-4">
                      <div class="form-group">
                        <label class="bmd-label-floating">学生の名前</label>
                        <input type="text" class="form-control" id="studenUpdatetName">
                      </div>
                    </div>
                    <div class="col-md-4">
                      <div class="form-group">
                        <label class="bmd-label-floating">学籍番号</label>
                        <input type="email" class="form-control" id="studentUpdateId">
                      </div>
                    </div>
                    <div class="col-md-4">
                      <div class="form-group">
                        <label class="bmd-label-floating">学生のGPA</label>
                        <input type="text" class="form-control" id="GPAUpdate">
                      </div>
                    </div>
                    <div class="col-md-8">
                      <div class="form-group">
                        <label class="bmd-label-floating">アクションタイプ：　</label>
                        <!-- <input type="email" class="form-control" id="actionDescription"> -->
                        <select id="actionUpdatePullDown" class="selectBox">
                          <option value="更新">更新</option>
                          <option value="削除">削除</option>
                        </select>
                      </div>
                    </div>
                  </div>
                  <div class="row">
                    <div class="col-md-8">
                      <div class="form-group">
                        <label class="bmd-label-floating">ゼミのアドレス</label>
                        <input type="text" class="form-control" id="seminarUpdateAddress">
                      </div>
                    </div>
                    <div class="col-md-8">
                      <div class="form-group">
                        <label class="bmd-label-floating">ゼミの名前</label>
                        <input type="text" class="form-control" id="seminarUpdateName">
                      </div>
                    </div>
                  </div>
                  <div class="row">
                    <div class="col-md-8">
                      <div class="form-group">
                        <label class="bmd-label-floating">データベースのアドレス</label>
                        <input type="text" class="form-control" id="dataBaseAddrUpdate">
                      </div>
                    </div>
                  </div>
                  <input type="button" class="btn btn-primary pull-right" id="updateStudent" value="更新する" />
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
      <footer class="footer">
        <img id="loadingImg" src="../assets/img/loading.gif" width="100px" height="100px" style="display:none" />
        <div class="container-fluid">

          <div class="copyright float-right">
            &copy;
            <script>
              document.write(new Date().getFullYear())
            </script>, made with <i class="material-icons">favorite</i> by
            <a href="" target="_blank">Theo and Jawad</a>.
          </div>
        </div>
      </footer>
    </div>
  </div>
  <!--   Core JS Files   -->
  <script src="../assets/js/core/jquery.min.js" type="text/javascript"></script>
  <script src="../assets/js/core/popper.min.js" type="text/javascript"></script>
  <script src="../assets/js/core/bootstrap-material-design.min.js" type="text/javascript"></script>
  <script src="../assets/js/plugins/perfect-scrollbar.jquery.min.js"></script>
  <!--  Google Maps Plugin    -->
  <script src="https://maps.googleapis.com/maps/api/js?key=YOUR_KEY_HERE"></script>
  <!-- Chartist JS -->
  <script src="../assets/js/plugins/chartist.min.js"></script>
  <!--  Notifications Plugin    -->
  <script src="../assets/js/plugins/bootstrap-notify.js"></script>
  <!-- Control Center for Material Dashboard: parallax effects, scripts for the example pages etc -->
  <script src="../assets/js/material-dashboard.min.js?v=2.1.0" type="text/javascript"></script>
  <!-- Material Dashboard DEMO methods, don't include it in your project! -->
  <script src="../assets/demo/demo.js"></script>
  <script>
    var DatabaseAddr = '0x2fc9d16f1c83c8c2c721b21fe06bff5808f0c001';
    /////////////////////////////////////////////////STUDENT CONTRACT/////////////////////////////////////////////////

    //ABI for contract
    var studentContract = web3.eth.contract([{
        "constant": true,
        "inputs": [{
          "name": "",
          "type": "uint256"
        }],
        "name": "studentInfo",
        "outputs": [{
            "name": "description",
            "type": "string"
          },
          {
            "name": "actionAdmin",
            "type": "address"
          },
          {
            "name": "DATABASE_CONTRACT",
            "type": "address"
          },
          {
            "name": "studentName",
            "type": "string"
          },
          {
            "name": "studentId",
            "type": "string"
          },
          {
            "name": "gpa",
            "type": "uint256"
          },
          {
            "name": "seminarName",
            "type": "string"
          },
          {
            "name": "seminarAddress",
            "type": "address"
          },
          {
            "name": "timestamp",
            "type": "uint256"
          },
          {
            "name": "blockNumber",
            "type": "uint256"
          }
        ],
        "payable": false,
        "stateMutability": "view",
        "type": "function"
      },
      {
        "constant": true,
        "inputs": [],
        "name": "getStudentHistoryCount",
        "outputs": [{
          "name": "",
          "type": "uint256"
        }],
        "payable": false,
        "stateMutability": "view",
        "type": "function"
      },
      {
        "constant": false,
        "inputs": [{
            "name": "newStudentInfo",
            "type": "string"
          },
          {
            "name": "seminarAddr",
            "type": "address"
          },
          {
            "name": "databaseAddr",
            "type": "address"
          },
          {
            "name": "newGpa",
            "type": "uint256"
          }
        ],
        "name": "updateStudentInfo",
        "outputs": [],
        "payable": false,
        "stateMutability": "nonpayable",
        "type": "function"
      },
      {
        "constant": true,
        "inputs": [],
        "name": "getMiningStatus",
        "outputs": [{
          "name": "",
          "type": "bool"
        }],
        "payable": false,
        "stateMutability": "view",
        "type": "function"
      },
      {
        "constant": false,
        "inputs": [{
            "name": "_studentInfo",
            "type": "string"
          },
          {
            "name": "seminarAddr",
            "type": "address"
          },
          {
            "name": "databaseAddr",
            "type": "address"
          },
          {
            "name": "newGpa",
            "type": "uint256"
          }
        ],
        "name": "InsertStudentInfo",
        "outputs": [{
          "name": "",
          "type": "string"
        }],
        "payable": false,
        "stateMutability": "nonpayable",
        "type": "function"
      },
      {
        "constant": true,
        "inputs": [],
        "name": "canMine",
        "outputs": [{
          "name": "",
          "type": "bool"
        }],
        "payable": false,
        "stateMutability": "view",
        "type": "function"
      },
      {
        "constant": false,
        "inputs": [{
          "name": "status",
          "type": "bool"
        }],
        "name": "updateMiningStatus",
        "outputs": [],
        "payable": false,
        "stateMutability": "nonpayable",
        "type": "function"
      },
      {
        "inputs": [{
            "name": "_studentInfo",
            "type": "string"
          },
          {
            "name": "seminarAddr",
            "type": "address"
          },
          {
            "name": "databaseAddr",
            "type": "address"
          },
          {
            "name": "newGpa",
            "type": "uint256"
          }
        ],
        "payable": false,
        "stateMutability": "nonpayable",
        "type": "constructor"
      },
      {
        "payable": false,
        "stateMutability": "nonpayable",
        "type": "fallback"
      }
    ]);

    //Get the information of a product by deploying
    //the product contract at the product address
    $("#createStudent").click(function () {
      var _studentName = $("#studentName").val();
      var _studentId = $("#studentId").val();
      var _GPA = $("#GPA").val();
      var _seminarName = $("#seminarName").val();
      var _seminarAddress = $("#seminarAddress").val();
      var _actionDescription = $("#actionDescription").val();
      // var _actionDescription = $('#actionPullDown option:selected').val();
      var _dataBaseAddr = $("#dataBaseAddr").val();

      //Input check
      if (isEmpty(_seminarAddress) || !isNumber(_seminarAddress)) {
        InvalidAddressAlert();
        return;
      }

      if (isEmpty(_dataBaseAddr) || !isNumber(_dataBaseAddr)) {
        InvalidAddressAlert();
        return;
      }

      Showloader();
      var student = studentContract.new(
        _actionDescription + '.' + _studentName + '.' + _studentId + '.' + _seminarName,
        _seminarAddress,
        _dataBaseAddr,
        _GPA * 100, {
          from: web3.eth.accounts[0],
          data: getStudentContractData(),
          gas: '4700000'
        },
        function (e, contract) {
          if (contract) {
            alert('学生を追加しました。\n反映されるまで少々時間がかかることがございます。');
            hideloader();
          }
          if (typeof contract.address !== 'undefined') {
            console.log('Contract mined! address: ' + contract.address + ' transactionHash: ' + contract.transactionHash);
          }
        })
    });

    function getStudentContractData() {
      var data =
        '0x60806040523480156200001157600080fd5b5060405162001e1038038062001e10833981018060405281019080805182019291906020018051906020019092919080519060200190929190805190602001909291905050506060600062000078868686866200020a640100000000026401000000009004565b91508390508073ffffffffffffffffffffffffffffffffffffffff16633b0d02333087856040518463ffffffff167c0100000000000000000000000000000000000000000000000000000000028152600401808473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1681526020018373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff168152602001806020018060200180602001848103845285818151815260200191508051906020019080838360005b838110156200017557808201518184015260208101905062000158565b50505050905090810190601f168015620001a35780820380516001836020036101000a031916815260200191505b508481038352600081526020016020018481038252600081526020016020019650505050505050600060405180830381600087803b158015620001e557600080fd5b505af1158015620001fa573d6000803e3d6000fd5b5050505050505050505062000bbb565b60606200021662000a5c565b6200022062000a5c565b606060006200022e62000a76565b6200024d8a620006ff6401000000000262000dd4176401000000009004565b9450620002a36040805190810160405280600181526020017f2e00000000000000000000000000000000000000000000000000000000000000815250620006ff6401000000000262000dd4176401000000009004565b93506001620002ca85876200072f6401000000000262000e02179091906401000000009004565b016040519080825280602002602001820160405280156200030057816020015b6060815260200190600190039081620002ea5790505b509250600091505b82518210156200037d5762000353620003398587620007ca6401000000000262000e79179091906401000000009004565b620007f76401000000000262000e93176401000000009004565b83838151811015156200036257fe5b90602001906020020181905250818060010192505062000308565b600483511415156200038e57600080fd5b8260008151811015156200039e57fe5b90602001906020020151816000018190525033816020019073ffffffffffffffffffffffffffffffffffffffff16908173ffffffffffffffffffffffffffffffffffffffff168152505087816040019073ffffffffffffffffffffffffffffffffffffffff16908173ffffffffffffffffffffffffffffffffffffffff16815250508260018151811015156200043057fe5b9060200190602002015181606001819052508260028151811015156200045257fe5b9060200190602002015181608001819052508260038151811015156200047457fe5b906020019060200201518160c00181905250868160a0018181525050888160e0019073ffffffffffffffffffffffffffffffffffffffff16908173ffffffffffffffffffffffffffffffffffffffff1681525050428161010001818152505043816101200181815250506001819080600181540180825580915050906001820390600052602060002090600a02016000909192909190915060008201518160000190805190602001906200052a92919062000b0c565b5060208201518160010160006101000a81548173ffffffffffffffffffffffffffffffffffffffff021916908373ffffffffffffffffffffffffffffffffffffffff16021790555060408201518160020160006101000a81548173ffffffffffffffffffffffffffffffffffffffff021916908373ffffffffffffffffffffffffffffffffffffffff1602179055506060820151816003019080519060200190620005d792919062000b0c565b506080820151816004019080519060200190620005f692919062000b0c565b5060a0820151816005015560c08201518160060190805190602001906200061f92919062000b0c565b5060e08201518160070160006101000a81548173ffffffffffffffffffffffffffffffffffffffff021916908373ffffffffffffffffffffffffffffffffffffffff1602179055506101008201518160080155610120820151816009015550505061012c87101580156200069557506101908711155b15620006bb5760016000806101000a81548160ff021916908315150217905550620006d6565b60008060006101000a81548160ff0219169083151502179055505b826003815181101515620006e657fe5b9060200190602002015195505050505050949350505050565b6200070962000a5c565b600060208301905060408051908101604052808451815260200182815250915050919050565b60008082600001516200076485600001518660200151866000015187602001516200086b640100000000026401000000009004565b0190505b836000015184602001510181111515620007c35781806001019250508260000151620007ba8560200151830386600001510383866000015187602001516200086b640100000000026401000000009004565b01905062000768565b5092915050565b620007d462000a5c565b620007f08383836200095c640100000000026401000000009004565b5092915050565b606080600083600001516040519080825280601f01601f191660200182016040528015620008345781602001602082028038833980820191505090505b50915060208201905062000861818560200151866000015162000a0f640100000000026401000000009004565b8192505050919050565b60008060008060008060008060008b97508c8b111515620009465760208b111515620008fc5760018b60200360080260020a03196001029550858a511694508a8d8d010393508588511692505b84600019168360001916141515620008f3578388101515620008df578c8c0198506200094c565b8780600101985050858851169250620008b8565b8798506200094c565b8a8a209150600096505b8a8d038711151562000945578a8820905080600019168260001916141562000931578798506200094c565b600188019750868060010197505062000906565b5b8c8c0198505b5050505050505050949350505050565b6200096662000a5c565b60006200099585600001518660200151866000015187602001516200086b640100000000026401000000009004565b90508460200151836020018181525050846020015181038360000181815250508460000151856020015101811415620009d957600085600001818152505062000a04565b8360000151836000015101856000018181510391508181525050836000015181018560200181815250505b829150509392505050565b60005b60208210151562000a39578251845260208401935060208301925060208203915062000a12565b6001826020036101000a0390508019835116818551168181178652505050505050565b604080519081016040528060008152602001600081525090565b6101406040519081016040528060608152602001600073ffffffffffffffffffffffffffffffffffffffff168152602001600073ffffffffffffffffffffffffffffffffffffffff16815260200160608152602001606081526020016000815260200160608152602001600073ffffffffffffffffffffffffffffffffffffffff16815260200160008152602001600081525090565b828054600181600116156101000203166002900490600052602060002090601f016020900481019282601f1062000b4f57805160ff191683800117855562000b80565b8280016001018555821562000b80579182015b8281111562000b7f57825182559160200191906001019062000b62565b5b50905062000b8f919062000b93565b5090565b62000bb891905b8082111562000bb457600081600090555060010162000b9a565b5090565b90565b6112458062000bcb6000396000f300608060405260043610610083576000357c0100000000000000000000000000000000000000000000000000000000900463ffffffff16806327cf29f01461009557806334ec0a881461032d578063399bf0c8146103585780634c069a331461040b578063d901dbc41461043a578063e171b84714610566578063f53f25df14610595575b34801561008f57600080fd5b50600080fd5b3480156100a157600080fd5b506100c0600480360381019080803590602001909291905050506105c4565b60405180806020018b73ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1681526020018a73ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1681526020018060200180602001898152602001806020018873ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200187815260200186815260200185810385528f818151815260200191508051906020019080838360005b838110156101b4578082015181840152602081019050610199565b50505050905090810190601f1680156101e15780820380516001836020036101000a031916815260200191505b5085810384528c818151815260200191508051906020019080838360005b8381101561021a5780820151818401526020810190506101ff565b50505050905090810190601f1680156102475780820380516001836020036101000a031916815260200191505b5085810383528b818151815260200191508051906020019080838360005b83811015610280578082015181840152602081019050610265565b50505050905090810190601f1680156102ad5780820380516001836020036101000a031916815260200191505b50858103825289818151815260200191508051906020019080838360005b838110156102e65780820151818401526020810190506102cb565b50505050905090810190601f1680156103135780820380516001836020036101000a031916815260200191505b509e50505050505050505050505050505060405180910390f35b34801561033957600080fd5b506103426108e7565b6040518082815260200191505060405180910390f35b34801561036457600080fd5b50610409600480360381019080803590602001908201803590602001908080601f0160208091040260200160405190810160405280939291908181526020018383808284378201915050505050509192919290803573ffffffffffffffffffffffffffffffffffffffff169060200190929190803573ffffffffffffffffffffffffffffffffffffffff169060200190929190803590602001909291905050506108f4565b005b34801561041757600080fd5b50610420610919565b604051808215151515815260200191505060405180910390f35b34801561044657600080fd5b506104eb600480360381019080803590602001908201803590602001908080601f0160208091040260200160405190810160405280939291908181526020018383808284378201915050505050509192919290803573ffffffffffffffffffffffffffffffffffffffff169060200190929190803573ffffffffffffffffffffffffffffffffffffffff1690602001909291908035906020019092919050505061092f565b6040518080602001828103825283818151815260200191508051906020019080838360005b8381101561052b578082015181840152602081019050610510565b50505050905090810190601f1680156105585780820380516001836020036101000a031916815260200191505b509250505060405180910390f35b34801561057257600080fd5b5061057b610da6565b604051808215151515815260200191505060405180910390f35b3480156105a157600080fd5b506105c2600480360381019080803515159060200190929190505050610db8565b005b6001818154811015156105d357fe5b90600052602060002090600a0201600091509050806000018054600181600116156101000203166002900480601f01602080910402602001604051908101604052809291908181526020018280546001816001161561010002031660029004801561067f5780601f106106545761010080835404028352916020019161067f565b820191906000526020600020905b81548152906001019060200180831161066257829003601f168201915b5050505050908060010160009054906101000a900473ffffffffffffffffffffffffffffffffffffffff16908060020160009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1690806003018054600181600116156101000203166002900480601f0160208091040260200160405190810160405280929190818152602001828054600181600116156101000203166002900480156107695780601f1061073e57610100808354040283529160200191610769565b820191906000526020600020905b81548152906001019060200180831161074c57829003601f168201915b505050505090806004018054600181600116156101000203166002900480601f0160208091040260200160405190810160405280929190818152602001828054600181600116156101000203166002900480156108075780601f106107dc57610100808354040283529160200191610807565b820191906000526020600020905b8154815290600101906020018083116107ea57829003601f168201915b505050505090806005015490806006018054600181600116156101000203166002900480601f0160208091040260200160405190810160405280929190818152602001828054600181600116156101000203166002900480156108ab5780601f10610880576101008083540402835291602001916108ab565b820191906000526020600020905b81548152906001019060200180831161088e57829003601f168201915b5050505050908060070160009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1690806008015490806009015490508a565b6000600180549050905090565b60018080549050101561090657600080fd5b6109128484848461092f565b5050505050565b60008060009054906101000a900460ff16905090565b60606109396110c4565b6109416110c4565b6060600061094d6110de565b6109568a610dd4565b94506109966040805190810160405280600181526020017f2e00000000000000000000000000000000000000000000000000000000000000815250610dd4565b935060016109ad8587610e0290919063ffffffff16565b016040519080825280602002602001820160405280156109e157816020015b60608152602001906001900390816109cc5790505b509250600091505b8251821015610a3557610a0d610a088587610e7990919063ffffffff16565b610e93565b8383815181101515610a1b57fe5b9060200190602002018190525081806001019250506109e9565b60048351141515610a4557600080fd5b826000815181101515610a5457fe5b90602001906020020151816000018190525033816020019073ffffffffffffffffffffffffffffffffffffffff16908173ffffffffffffffffffffffffffffffffffffffff168152505087816040019073ffffffffffffffffffffffffffffffffffffffff16908173ffffffffffffffffffffffffffffffffffffffff1681525050826001815181101515610ae557fe5b906020019060200201518160600181905250826002815181101515610b0657fe5b906020019060200201518160800181905250826003815181101515610b2757fe5b906020019060200201518160c00181905250868160a0018181525050888160e0019073ffffffffffffffffffffffffffffffffffffffff16908173ffffffffffffffffffffffffffffffffffffffff1681525050428161010001818152505043816101200181815250506001819080600181540180825580915050906001820390600052602060002090600a0201600090919290919091506000820151816000019080519060200190610bdb929190611174565b5060208201518160010160006101000a81548173ffffffffffffffffffffffffffffffffffffffff021916908373ffffffffffffffffffffffffffffffffffffffff16021790555060408201518160020160006101000a81548173ffffffffffffffffffffffffffffffffffffffff021916908373ffffffffffffffffffffffffffffffffffffffff1602179055506060820151816003019080519060200190610c86929190611174565b506080820151816004019080519060200190610ca3929190611174565b5060a0820151816005015560c0820151816006019080519060200190610cca929190611174565b5060e08201518160070160006101000a81548173ffffffffffffffffffffffffffffffffffffffff021916908373ffffffffffffffffffffffffffffffffffffffff1602179055506101008201518160080155610120820151816009015550505061012c8710158015610d3f57506101908711155b15610d635760016000806101000a81548160ff021916908315150217905550610d7e565b60008060006101000a81548160ff0219169083151502179055505b826003815181101515610d8d57fe5b9060200190602002015195505050505050949350505050565b6000809054906101000a900460ff1681565b806000806101000a81548160ff02191690831515021790555050565b610ddc6110c4565b600060208301905060408051908101604052808451815260200182815250915050919050565b6000808260000151610e268560000151866020015186600001518760200151610ef5565b0190505b836000015184602001510181111515610e725781806001019250508260000151610e6a856020015183038660000151038386600001518760200151610ef5565b019050610e2a565b5092915050565b610e816110c4565b610e8c838383610fdb565b5092915050565b606080600083600001516040519080825280601f01601f191660200182016040528015610ecf5781602001602082028038833980820191505090505b509150602082019050610eeb8185602001518660000151611079565b8192505050919050565b60008060008060008060008060008b97508c8b111515610fc55760208b111515610f7f5760018b60200360080260020a03196001029550858a511694508a8d8d010393508588511692505b84600019168360001916141515610f77578388101515610f64578c8c019850610fcb565b8780600101985050858851169250610f40565b879850610fcb565b8a8a209150600096505b8a8d0387111515610fc4578a88209050806000191682600019161415610fb157879850610fcb565b6001880197508680600101975050610f89565b5b8c8c0198505b5050505050505050949350505050565b610fe36110c4565b60006110018560000151866020015186600001518760200151610ef5565b9050846020015183602001818152505084602001518103836000018181525050846000015185602001510181141561104357600085600001818152505061106e565b8360000151836000015101856000018181510391508181525050836000015181018560200181815250505b829150509392505050565b60005b6020821015156110a1578251845260208401935060208301925060208203915061107c565b6001826020036101000a0390508019835116818551168181178652505050505050565b604080519081016040528060008152602001600081525090565b6101406040519081016040528060608152602001600073ffffffffffffffffffffffffffffffffffffffff168152602001600073ffffffffffffffffffffffffffffffffffffffff16815260200160608152602001606081526020016000815260200160608152602001600073ffffffffffffffffffffffffffffffffffffffff16815260200160008152602001600081525090565b828054600181600116156101000203166002900490600052602060002090601f016020900481019282601f106111b557805160ff19168380011785556111e3565b828001600101855582156111e3579182015b828111156111e25782518255916020019190600101906111c7565b5b5090506111f091906111f4565b5090565b61121691905b808211156112125760008160009055506001016111fa565b5090565b905600a165627a7a723058209436f97963c2f47e8d56cc869f1a99406caa7097820f69388f68622a398934cb0029';
      return data;
    }

    $("#updateStudent").click(function () {
      var updateStudentAddr = $("#updateStudentAddr").val();

      var _studenUpdatetName = $("#studenUpdatetName").val();
      var _studentUpdateId = $("#studentUpdateId").val();
      var _GPAUpdate = $("#GPAUpdate").val();
      var _seminarUpdateName = $("#seminarUpdateName").val();
      var _seminarUpdateAddress = $("#seminarUpdateAddress").val();
      var _actionUpdatePullDown = $('#actionUpdatePullDown option:selected').val();
      var _dataBaseAddrUpdate = $("#dataBaseAddrUpdate").val();

      //Input check
      if (isEmpty(_seminarUpdateAddress) || !isNumber(_seminarUpdateAddress)) {
        InvalidAddressAlert();
        return;
      }

      if (isEmpty(_dataBaseAddrUpdate) || !isNumber(_dataBaseAddrUpdate)) {
        InvalidAddressAlert();
        return;
      }

      if (isEmpty(updateStudentAddr) || !isNumber(updateStudentAddr)) {
        InvalidAddressAlert();
        return;
      }

      Showloader();
      _studentContract = studentContract.at(updateStudentAddr);
      _studentContract.updateStudentInfo(
        _actionUpdatePullDown + '.' + _studenUpdatetName + '.' + _studentUpdateId + '.' + _seminarUpdateName,
        _seminarUpdateAddress,
        _dataBaseAddrUpdate,
        _GPAUpdate * 100,
        (err, res) => {
          if (err) {
            console.log(res);
            hideloader();
          } else {
            alert('学生情報を更新しました。');
            hideloader();
          }
        });
    });

    function loadDatabaseAddr() {
      $("#currDatabase").html(DatabaseAddr);
    }

    //Check if input is a number (address)
    function isNumber(str) {
      if (isNaN(str)) {
        return false;
      } else {
        return true;
      }
    }

    //Alert if no address is found
    function InvalidAddressAlert() {
      alert('Please enter a valid address');
    }

    //Empty string check
    function isEmpty(str) {
      return (!str || 0 === str.length);
    }

    function Showloader() {
      $("#loadingImg").show();
    }

    function hideloader() {
      $("#loadingImg").hide();
    }
  </script>
  <script>
    function copyToClipboard(element) {
      var $temp = $("<input>");
      $("body").append($temp);
      $temp.val($(element).text()).select();
      document.execCommand("copy");
      $temp.remove();
    }
  </script>
</body>

</html>